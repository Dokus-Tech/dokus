# Self-hosting (Lite) configuration
# Goal: keep only secrets in env (.env), everything else is fixed here.

include "application.conf"

ktor.deployment.environment = "selfhost"

database {
    url = "jdbc:postgresql://postgres:5432/dokus"
    username = "dokus"
    password = ${DB_PASSWORD}

    pool {
        maxSize = 5
        minSize = 2
    }
}

jwt {
    secret = ${JWT_SECRET}
    issuer = "dokus"
    audience = "dokus-api"
}

security.cors.allowedHosts = "*"

caching {
    type = "redis"
    redis {
        host = "redis"
        port = 6379
        password = ${REDIS_PASSWORD}
        database = 0
    }
}

rabbitmq {
    host = "rabbitmq"
    port = 5672
    username = "dokus"
    password = ${RABBITMQ_PASSWORD}
    virtualHost = "/dokus"
}

# Lite optimizations
geolocation.enabled = false

server.environment = "selfhost"

