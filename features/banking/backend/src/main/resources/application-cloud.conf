include "application.conf"

# Cloud deployment overrides

ktor {
    deployment {
        environment = "cloud"
        environment = ${?ENVIRONMENT}
    }
}

database {
    # Override with cloud database credentials
    username = ${DB_USERNAME}
    password = ${DB_PASSWORD}
    url = ${?DB_URL}

    pool {
        maxSize = 20
        minSize = 5
        acquisitionTimeout = 30000
        idleTimeout = 600000
        maxLifetime = 1800000
        leakDetectionThreshold = 30000
    }
}

security {
    cors {
        # Cloud production hosts - override via CORS_ALLOWED_HOSTS env var
        # Use "*" to allow any host (for internal/Raspberry Pi deployments)
        allowedHosts = ${?CORS_ALLOWED_HOSTS}
    }
}

caching {
    type = ${CACHE_TYPE}

    redis {
        host = ${?REDIS_HOST}
        port = ${?REDIS_PORT}
        password = ${?REDIS_PASSWORD}
    }
}

logging {
    level = ${?LOG_LEVEL}
    consoleJson = true  # JSON format for cloud
}
