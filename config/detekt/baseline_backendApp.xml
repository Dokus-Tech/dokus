<?xml version="1.0" ?>
<SmellBaseline>
  <ManuallySuppressedIssues/>
  <CurrentIssues>
    <ID>ArgumentListWrapping:DocumentTruthService.kt$DocumentTruthService$( "AUDIT review_resolved: decision=DIFFERENT tenant={} user={} review={} " + "sourceId={} originalDocumentId={} newDocumentId={}", tenantId, userId, reviewId, source.id, source.documentId, newDocumentId )</ID>
    <ID>ArgumentListWrapping:DocumentTruthService.kt$DocumentTruthService$( "AUDIT review_resolved: decision=SAME tenant={} user={} review={} " + "sourceId={} originalDocumentId={} mergedIntoDocumentId={} matchType={}", tenantId, userId, reviewId, source.id, source.documentId, review.documentId, source.matchType )</ID>
    <ID>ComplexCondition:ContactResolutionService.kt$ContactResolutionService$streetLine1 == null &amp;&amp; city == null &amp;&amp; postalCode == null &amp;&amp; country == null</ID>
    <ID>ComplexCondition:ContactResolutionService.kt$ContactResolutionService$vat != null &amp;&amp; vat.isValid &amp;&amp; !vat.isBelgian &amp;&amp; name != null</ID>
    <ID>CyclomaticComplexMethod:AttachmentRoutes.kt$internal fun Route.attachmentRoutes()</ID>
    <ID>CyclomaticComplexMethod:AutoConfirmPolicy.kt$AutoConfirmPolicy$suspend fun canAutoConfirm( tenantId: TenantId, documentId: DocumentId, source: DocumentSource, documentType: DocumentType, draftData: DocumentDraftData, auditPassed: Boolean, confidence: Double, linkedContactId: ContactId?, directionResolvedFromAiHintOnly: Boolean ): Boolean</ID>
    <ID>CyclomaticComplexMethod:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$suspend fun runSweepOnce(): CashflowProjectionReconciliationReport</ID>
    <ID>CyclomaticComplexMethod:ContactResolutionService.kt$ContactResolutionService$suspend fun resolve( tenantId: TenantId, draftData: DocumentDraftData, authoritativeSnapshot: CounterpartySnapshot, tenantVat: VatNumber? = null ): ContactResolutionResult</ID>
    <ID>CyclomaticComplexMethod:CreditNoteConfirmationService.kt$CreditNoteConfirmationService$@Suppress("ThrowsCount") suspend fun confirm( tenantId: TenantId, documentId: DocumentId, draftData: CreditNoteDraftData, linkedContactId: ContactId? ): Result&lt;ConfirmationResult&gt;</ID>
    <ID>CyclomaticComplexMethod:DocumentProcessingWorker.kt$DocumentProcessingWorker$private suspend fun processIngestionRun(ingestion: IngestionItemEntity)</ID>
    <ID>CyclomaticComplexMethod:DocumentRecordRoutes.kt$internal fun Route.documentRecordRoutes()</ID>
    <ID>CyclomaticComplexMethod:DocumentTruthService.kt$DocumentTruthService$private fun computeIdentity(tenantId: TenantId, data: DocumentDraftData): IdentityDescriptor?</ID>
    <ID>CyclomaticComplexMethod:ExpenseService.kt$ExpenseService$fun categorizeExpense(merchant: String, description: String? = null): ExpenseCategory</ID>
    <ID>CyclomaticComplexMethod:InvoiceConfirmationService.kt$InvoiceConfirmationService$private fun buildInvoiceItems(draftData: InvoiceDraftData): List&lt;InvoiceItemDto&gt;</ID>
    <ID>CyclomaticComplexMethod:PeppolRoutes.kt$internal fun Route.peppolRoutes()</ID>
    <ID>CyclomaticComplexMethod:ReceiptConfirmationService.kt$ReceiptConfirmationService$@Suppress("ThrowsCount") suspend fun confirm( tenantId: TenantId, documentId: DocumentId, draftData: ReceiptDraftData, linkedContactId: ContactId? ): Result&lt;ConfirmationResult&gt;</ID>
    <ID>CyclomaticComplexMethod:TenantRoutes.kt$internal fun Route.tenantRoutes()</ID>
    <ID>ImplicitDefaultLocale:ContactResolutionService.kt$ContactResolutionService$String.format("%.2f", value)</ID>
    <ID>ImportOrdering:AuthService.kt$import com.auth0.jwt.JWT import kotlin.time.Instant import tech.dokus.database.repository.auth.RefreshTokenRepository import tech.dokus.database.repository.auth.RevokedSessionInfo import tech.dokus.database.repository.auth.UserRepository import tech.dokus.domain.DeviceType import tech.dokus.domain.Password import tech.dokus.domain.enums.Permission import tech.dokus.domain.enums.SubscriptionTier import tech.dokus.domain.enums.UserRole import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.SessionId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.UserId import tech.dokus.domain.model.TenantMembership import tech.dokus.domain.model.User import tech.dokus.domain.model.auth.JwtClaims import tech.dokus.domain.model.auth.LoginRequest import tech.dokus.domain.model.auth.LoginResponse import tech.dokus.domain.model.auth.LogoutRequest import tech.dokus.domain.model.auth.RefreshTokenRequest import tech.dokus.domain.model.auth.RegisterRequest import tech.dokus.domain.model.auth.SessionDto import tech.dokus.domain.model.auth.TenantScope import tech.dokus.domain.model.auth.UpdateProfileRequest import tech.dokus.foundation.backend.database.now import tech.dokus.foundation.backend.security.JwtGenerator import tech.dokus.foundation.backend.security.TokenBlacklistService import tech.dokus.foundation.backend.utils.loggerFor import kotlin.time.Duration.Companion.days import java.time.Instant as JavaInstant</ID>
    <ID>ImportOrdering:CashflowEntriesService.kt$import kotlin.time.Clock import kotlinx.datetime.LocalDate import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import tech.dokus.backend.util.isUniqueViolation import tech.dokus.database.repository.cashflow.CashflowEntriesRepository import tech.dokus.domain.Money import tech.dokus.domain.enums.CashflowDirection import tech.dokus.domain.enums.CashflowEntryStatus import tech.dokus.domain.enums.CashflowSourceType import tech.dokus.domain.enums.CashflowViewMode import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.CashflowEntryId import tech.dokus.domain.ids.ContactId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.CashflowEntry import tech.dokus.foundation.backend.utils.loggerFor import kotlin.uuid.Uuid</ID>
    <ID>ImportOrdering:CashflowOverviewService.kt$import kotlin.time.Clock import kotlinx.datetime.DatePeriod import kotlinx.datetime.LocalDate import kotlinx.datetime.TimeZone import kotlinx.datetime.minus import kotlinx.datetime.todayIn import tech.dokus.database.repository.cashflow.CashflowEntriesRepository import tech.dokus.database.repository.cashflow.ExpenseRepository import tech.dokus.database.repository.cashflow.InvoiceRepository import tech.dokus.domain.Money import tech.dokus.domain.enums.CashflowDirection import tech.dokus.domain.enums.CashflowEntryStatus import tech.dokus.domain.enums.CashflowViewMode import tech.dokus.domain.enums.Currency import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.enums.InvoiceStatus import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.CashInSummary import tech.dokus.domain.model.CashOutSummary import tech.dokus.domain.model.CashflowOverview import tech.dokus.domain.model.CashflowPeriod import tech.dokus.foundation.backend.utils.loggerFor</ID>
    <ID>ImportOrdering:CashflowProjectionReconciliationService.kt$import kotlin.uuid.Uuid import tech.dokus.database.repository.cashflow.CashflowEntriesRepository import tech.dokus.domain.Money import tech.dokus.domain.enums.CashflowEntryStatus import tech.dokus.domain.ids.CashflowEntryId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.FinancialDocumentDto</ID>
    <ID>ImportOrdering:ChatRoutes.kt$import io.ktor.http.HttpStatusCode import io.ktor.server.request.receive import io.ktor.server.resources.get import io.ktor.server.response.respond import io.ktor.server.routing.Route import io.ktor.server.routing.post import kotlin.time.Clock import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import org.koin.ktor.ext.inject import org.slf4j.LoggerFactory import tech.dokus.database.repository.cashflow.DocumentRepository import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.UserId import tech.dokus.domain.model.ai.ChatCitation import tech.dokus.domain.model.ai.ChatConfiguration import tech.dokus.domain.model.ai.ChatHistoryResponse import tech.dokus.domain.model.ai.ChatMessageDto import tech.dokus.domain.model.ai.ChatMessageId import tech.dokus.domain.model.ai.ChatRequest import tech.dokus.domain.model.ai.ChatResponse import tech.dokus.domain.model.ai.ChatResponseMetadata import tech.dokus.domain.model.ai.ChatScope import tech.dokus.domain.model.ai.ChatSessionId import tech.dokus.domain.model.ai.ChatSessionListResponse import tech.dokus.domain.model.ai.MessageRole import tech.dokus.domain.repository.ChatRepository import tech.dokus.domain.routes.Chat import tech.dokus.features.ai.agents.ChatAgent import tech.dokus.features.ai.agents.ConversationMessage import tech.dokus.features.ai.config.ModelSet import tech.dokus.foundation.backend.security.authenticateJwt import tech.dokus.foundation.backend.security.dokusPrincipal import tech.dokus.features.ai.agents.MessageRole as AgentMessageRole</ID>
    <ID>ImportOrdering:CreditNoteService.kt$import kotlin.uuid.Uuid import kotlinx.datetime.LocalDate import tech.dokus.database.repository.cashflow.CreditNoteRepository import tech.dokus.database.repository.cashflow.RefundClaimRepository import tech.dokus.domain.Money import tech.dokus.domain.enums.CashflowDirection import tech.dokus.domain.enums.CreditNoteStatus import tech.dokus.domain.enums.CreditNoteType import tech.dokus.domain.enums.SettlementIntent import tech.dokus.domain.ids.ContactId import tech.dokus.domain.ids.CreditNoteId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.CreateCreditNoteRequest import tech.dokus.domain.model.FinancialDocumentDto import tech.dokus.domain.model.RecordRefundRequest import tech.dokus.domain.model.RefundClaimDto import tech.dokus.domain.model.common.PaginatedResponse import tech.dokus.foundation.backend.utils.loggerFor</ID>
    <ID>ImportOrdering:DocumentRecordRoutes.kt$import io.ktor.http.* import io.ktor.server.request.* import io.ktor.server.resources.* import io.ktor.server.resources.patch import io.ktor.server.resources.post import io.ktor.server.response.* import io.ktor.server.routing.Route import kotlin.time.Clock import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import org.koin.ktor.ext.inject import org.slf4j.LoggerFactory import tech.dokus.backend.routes.cashflow.documents.addDownloadUrl import tech.dokus.backend.routes.cashflow.documents.findConfirmedEntity import tech.dokus.backend.routes.cashflow.documents.toDto import tech.dokus.backend.routes.cashflow.documents.toSummaryDto import tech.dokus.backend.routes.cashflow.documents.updateDraftCounterparty import tech.dokus.backend.services.cashflow.CashflowProjectionReconciliationService import tech.dokus.backend.services.documents.DocumentTruthService import tech.dokus.backend.services.documents.confirmation.DocumentConfirmationDispatcher import tech.dokus.database.repository.cashflow.CashflowEntriesRepository import tech.dokus.database.repository.cashflow.CreditNoteRepository import tech.dokus.database.repository.cashflow.DocumentDraftRepository import tech.dokus.database.repository.cashflow.DocumentIngestionRunRepository import tech.dokus.database.repository.cashflow.DocumentRepository import tech.dokus.database.repository.cashflow.DocumentSourceSummary import tech.dokus.database.repository.cashflow.ExpenseRepository import tech.dokus.database.repository.cashflow.selectDefaultSourceFromList import tech.dokus.database.repository.cashflow.InvoiceRepository import tech.dokus.domain.enums.CounterpartyIntent import tech.dokus.domain.enums.DocumentStatus import tech.dokus.domain.enums.DocumentType import tech.dokus.domain.enums.IngestionStatus import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.DocumentMatchReviewId import tech.dokus.domain.ids.DocumentSourceId import tech.dokus.domain.model.DocumentRecordDto import tech.dokus.domain.model.FinancialDocumentDto import tech.dokus.domain.model.RejectDocumentRequest import tech.dokus.domain.model.ReprocessRequest import tech.dokus.domain.model.ReprocessResponse import tech.dokus.domain.model.ResolveDocumentMatchReviewRequest import tech.dokus.domain.model.UpdateDraftRequest import tech.dokus.domain.model.UpdateDraftResponse import tech.dokus.domain.model.common.PaginatedResponse import tech.dokus.domain.routes.Documents import tech.dokus.foundation.backend.security.authenticateJwt import tech.dokus.foundation.backend.security.dokusPrincipal import tech.dokus.foundation.backend.storage.DocumentStorageService as MinioDocumentStorageService</ID>
    <ID>ImportOrdering:DocumentRouteHelpers.kt$import tech.dokus.database.repository.cashflow.CreditNoteRepository import tech.dokus.database.repository.cashflow.DocumentDraftRepository import tech.dokus.database.repository.cashflow.DraftSummary import tech.dokus.database.repository.cashflow.ExpenseRepository import tech.dokus.database.repository.cashflow.IngestionRunSummary import tech.dokus.database.repository.cashflow.InvoiceRepository import tech.dokus.database.repository.cashflow.DocumentMatchReviewSummary import tech.dokus.database.repository.cashflow.DocumentSourceSummary import tech.dokus.domain.enums.ContactLinkSource import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.enums.DocumentType import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.ContactId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.CreditNoteDraftData import tech.dokus.domain.model.DocumentDraftData import tech.dokus.domain.model.DocumentDraftDto import tech.dokus.domain.model.DocumentDto import tech.dokus.domain.model.DocumentIngestionDto import tech.dokus.domain.model.DocumentMatchReviewSummaryDto import tech.dokus.domain.model.DocumentProcessingStepDto import tech.dokus.domain.model.DocumentSourceDto import tech.dokus.domain.model.FinancialDocumentDto import tech.dokus.domain.model.InvoiceDraftData import tech.dokus.domain.model.ReceiptDraftData import tech.dokus.domain.model.UpdateDraftRequest import tech.dokus.domain.utils.parseSafe import tech.dokus.foundation.backend.storage.DocumentStorageService as MinioDocumentStorageService</ID>
    <ID>ImportOrdering:DocumentTruthService.kt$import kotlin.uuid.Uuid import io.micrometer.core.instrument.Metrics import tech.dokus.database.repository.cashflow.DocumentBlobCreatePayload import tech.dokus.database.repository.cashflow.DocumentBlobRepository import tech.dokus.database.repository.cashflow.DocumentDraftRepository import tech.dokus.database.repository.cashflow.DocumentIngestionRunRepository import tech.dokus.database.repository.cashflow.DocumentMatchReviewRepository import tech.dokus.database.repository.cashflow.DocumentMatchReviewSummary import tech.dokus.database.repository.cashflow.DocumentRepository import tech.dokus.database.repository.cashflow.DocumentSourceCreatePayload import tech.dokus.database.repository.cashflow.DocumentSourceRepository import tech.dokus.database.repository.cashflow.DocumentSourceSummary import tech.dokus.domain.Money import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.enums.DocumentIntakeOutcome import tech.dokus.domain.enums.DocumentMatchReviewReasonType import tech.dokus.domain.enums.DocumentMatchReviewStatus import tech.dokus.domain.enums.DocumentMatchType import tech.dokus.domain.enums.DocumentSource import tech.dokus.domain.enums.DocumentSourceStatus import tech.dokus.domain.enums.DocumentType import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.DocumentMatchReviewId import tech.dokus.domain.ids.DocumentSourceId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.UserId import tech.dokus.domain.ids.VatNumber import tech.dokus.domain.model.CreditNoteDraftData import tech.dokus.domain.model.DocumentDraftData import tech.dokus.domain.model.DocumentIntakeOutcomeDto import tech.dokus.domain.model.DocumentMatchResolutionDecision import tech.dokus.domain.model.InvoiceDraftData import tech.dokus.domain.model.toDocumentType import tech.dokus.domain.model.VatBreakdownEntry import tech.dokus.domain.utils.json import tech.dokus.foundation.backend.storage.DocumentStorageService import tech.dokus.foundation.backend.utils.loggerFor import org.jetbrains.exposed.v1.core.SortOrder import org.jetbrains.exposed.v1.core.and import org.jetbrains.exposed.v1.core.eq import org.jetbrains.exposed.v1.jdbc.insert import org.jetbrains.exposed.v1.jdbc.selectAll import org.jetbrains.exposed.v1.jdbc.transactions.experimental.newSuspendedTransaction import tech.dokus.database.tables.documents.DocumentBlobsTable import tech.dokus.database.tables.documents.DocumentIngestionRunsTable import tech.dokus.database.tables.documents.DocumentSourcesTable import tech.dokus.database.tables.documents.DocumentsTable import tech.dokus.domain.enums.IngestionStatus import tech.dokus.domain.ids.IngestionRunId import java.security.MessageDigest</ID>
    <ID>ImportOrdering:InvoiceConfirmationService.kt$import kotlin.time.Clock import kotlinx.datetime.DatePeriod import kotlinx.datetime.TimeZone import kotlinx.datetime.plus import kotlinx.datetime.toLocalDateTime import tech.dokus.backend.services.cashflow.CashflowEntriesService import tech.dokus.backend.util.isUniqueViolation import tech.dokus.backend.util.runSuspendCatching import tech.dokus.database.repository.cashflow.DocumentDraftRepository import tech.dokus.database.repository.cashflow.InvoiceRepository import tech.dokus.domain.Money import tech.dokus.domain.VatRate import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.enums.DocumentStatus import tech.dokus.domain.enums.InvoiceStatus import tech.dokus.domain.exceptions.DokusException import tech.dokus.domain.ids.ContactId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.model.CreateInvoiceRequest import tech.dokus.domain.model.InvoiceDraftData import tech.dokus.domain.model.InvoiceItemDto import tech.dokus.foundation.backend.utils.loggerFor</ID>
    <ID>ImportOrdering:PeppolPollingWorker.kt$import kotlinx.coroutines.CancellationException import kotlinx.coroutines.CoroutineScope import kotlinx.coroutines.Dispatchers import kotlinx.coroutines.Job import kotlinx.coroutines.SupervisorJob import kotlinx.coroutines.delay import kotlinx.coroutines.isActive import kotlinx.coroutines.launch import kotlinx.coroutines.sync.Mutex import kotlin.time.Clock import kotlin.time.Instant import kotlinx.datetime.LocalDateTime import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import kotlinx.serialization.json.decodeFromJsonElement import org.slf4j.LoggerFactory import tech.dokus.backend.services.documents.AutoConfirmPolicy import tech.dokus.backend.services.documents.DocumentTruthService import tech.dokus.backend.services.documents.confirmation.DocumentConfirmationDispatcher import tech.dokus.backend.services.notifications.NotificationEmission import tech.dokus.backend.services.notifications.NotificationService import tech.dokus.database.repository.cashflow.DocumentDraftRepository import tech.dokus.database.repository.cashflow.DocumentIngestionRunRepository import tech.dokus.database.repository.cashflow.DocumentRepository import tech.dokus.database.repository.contacts.ContactRepository import tech.dokus.database.repository.peppol.PeppolSettingsRepository import tech.dokus.domain.Money import tech.dokus.domain.Name import tech.dokus.domain.enums.ContactSource import tech.dokus.domain.enums.DocumentDirection import tech.dokus.domain.enums.DocumentIntakeOutcome import tech.dokus.domain.enums.DocumentSource import tech.dokus.domain.enums.DocumentType import tech.dokus.domain.enums.NotificationReferenceType import tech.dokus.domain.enums.NotificationType import tech.dokus.domain.ids.ContactId import tech.dokus.domain.ids.DocumentId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.VatNumber import tech.dokus.domain.model.CreditNoteDraftData import tech.dokus.domain.model.DocumentDraftData import tech.dokus.domain.model.InvoiceDraftData import tech.dokus.domain.model.ReceiptDraftData import tech.dokus.domain.model.contact.CreateContactRequest import tech.dokus.domain.utils.json import tech.dokus.peppol.provider.client.recommand.model.RecommandAttachment import tech.dokus.peppol.provider.client.recommand.model.RecommandCreditNote import tech.dokus.peppol.provider.client.recommand.model.RecommandDocumentDetail import tech.dokus.peppol.provider.client.recommand.model.RecommandDocumentType import tech.dokus.peppol.provider.client.recommand.model.RecommandInvoice import tech.dokus.peppol.provider.client.recommand.model.RecommandSelfBillingCreditNote import tech.dokus.peppol.provider.client.recommand.model.RecommandSelfBillingInvoice import tech.dokus.peppol.service.PeppolService import java.util.Base64 import java.util.concurrent.ConcurrentHashMap import java.util.concurrent.atomic.AtomicBoolean import kotlin.time.Duration.Companion.days import kotlin.time.Duration.Companion.minutes import kotlin.time.Duration.Companion.seconds</ID>
    <ID>ImportOrdering:TeamService.kt$import kotlin.time.Clock import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import tech.dokus.database.repository.auth.InvitationRepository import tech.dokus.database.repository.auth.TenantRepository import tech.dokus.database.repository.auth.UserRepository import tech.dokus.domain.enums.InvitationStatus import tech.dokus.domain.enums.UserRole import tech.dokus.domain.ids.InvitationId import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.UserId import tech.dokus.domain.model.CreateInvitationRequest import tech.dokus.domain.model.TeamMember import tech.dokus.domain.model.TenantInvitation import tech.dokus.foundation.backend.utils.loggerFor import kotlin.time.Duration.Companion.days</ID>
    <ID>ImportOrdering:WelcomeEmailService.kt$import kotlin.time.Clock import kotlinx.datetime.LocalDateTime import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import tech.dokus.database.repository.auth.TenantRepository import tech.dokus.database.repository.auth.UserRepository import tech.dokus.database.repository.auth.WelcomeEmailJobRepository import tech.dokus.database.utils.toKotlinxInstant import tech.dokus.domain.ids.TenantId import tech.dokus.domain.ids.UserId import tech.dokus.foundation.backend.utils.loggerFor import kotlin.time.Duration.Companion.minutes</ID>
    <ID>ImportOrdering:WelcomeEmailWorker.kt$import kotlinx.coroutines.CancellationException import kotlinx.coroutines.CoroutineScope import kotlinx.coroutines.Dispatchers import kotlinx.coroutines.Job import kotlinx.coroutines.SupervisorJob import kotlinx.coroutines.delay import kotlinx.coroutines.isActive import kotlinx.coroutines.launch import kotlin.time.Clock import kotlinx.datetime.TimeZone import kotlinx.datetime.toLocalDateTime import tech.dokus.backend.services.auth.EmailService import tech.dokus.backend.services.auth.EmailTemplateRenderer import tech.dokus.database.repository.auth.TenantRepository import tech.dokus.database.repository.auth.UserRepository import tech.dokus.database.repository.auth.WelcomeEmailJob import tech.dokus.database.repository.auth.WelcomeEmailJobRepository import tech.dokus.database.repository.peppol.PeppolSettingsRepository import tech.dokus.foundation.backend.config.EmailConfig import tech.dokus.foundation.backend.utils.loggerFor import java.util.concurrent.atomic.AtomicBoolean import kotlin.time.Duration import kotlin.time.Duration.Companion.hours import kotlin.time.Duration.Companion.minutes</ID>
    <ID>LargeClass:DocumentTruthService.kt$DocumentTruthService</ID>
    <ID>LongMethod:AttachmentRoutes.kt$internal fun Route.attachmentRoutes()</ID>
    <ID>LongMethod:CashflowOverviewService.kt$CashflowOverviewService$@Suppress("LongParameterList") suspend fun getCashflowOverview( tenantId: TenantId, viewMode: CashflowViewMode? = null, fromDate: LocalDate? = null, toDate: LocalDate? = null, direction: CashflowDirection? = null, statuses: List&lt;CashflowEntryStatus&gt;? = null ): Result&lt;CashflowOverview&gt;</ID>
    <ID>LongMethod:ChatRoutes.kt$internal fun Route.chatRoutes()</ID>
    <ID>LongMethod:ChatRoutes.kt$private suspend fun processChat( request: ChatRequest, tenantId: TenantId, userId: UserId, documentId: DocumentId?, chatAgent: ChatAgent, chatRepository: ChatRepository, models: ModelSet, logger: org.slf4j.Logger ): ChatResponse</ID>
    <ID>LongMethod:ContactResolutionService.kt$ContactResolutionService$suspend fun resolve( tenantId: TenantId, draftData: DocumentDraftData, authoritativeSnapshot: CounterpartySnapshot, tenantVat: VatNumber? = null ): ContactResolutionResult</ID>
    <ID>LongMethod:ContactRoutes.kt$fun Route.contactRoutes()</ID>
    <ID>LongMethod:DocumentProcessingWorker.kt$DocumentProcessingWorker$private suspend fun processIngestionRun(ingestion: IngestionItemEntity)</ID>
    <ID>LongMethod:DocumentRecordRoutes.kt$internal fun Route.documentRecordRoutes()</ID>
    <ID>LongMethod:DocumentTruthService.kt$DocumentTruthService$suspend fun applyPostExtractionMatching( tenantId: TenantId, documentId: DocumentId, sourceId: DocumentSourceId?, draftData: DocumentDraftData, extractedSnapshotJson: String ): DocumentIntakeServiceResult</ID>
    <ID>LongMethod:DocumentTruthService.kt$DocumentTruthService$suspend fun resolveMatchReview( tenantId: TenantId, userId: UserId, reviewId: DocumentMatchReviewId, decision: DocumentMatchResolutionDecision ): DocumentIntakeServiceResult?</ID>
    <ID>LongMethod:PeppolPollingWorker.kt$PeppolPollingWorker$private suspend fun processIncomingPeppolDocument( draftData: DocumentDraftData, senderPeppolId: String, tenantId: TenantId, documentDetail: RecommandDocumentDetail? ): DocumentId</ID>
    <ID>LongMethod:PeppolRoutes.kt$internal fun Route.peppolRoutes()</ID>
    <ID>LongMethod:TeamRoutes.kt$internal fun Route.teamRoutes()</ID>
    <ID>LongMethod:TenantRoutes.kt$internal fun Route.tenantRoutes()</ID>
    <ID>LongParameterList:AuthService.kt$AuthService$( private val userRepository: UserRepository, private val jwtGenerator: JwtGenerator, private val refreshTokenRepository: RefreshTokenRepository, private val rateLimitService: RateLimitServiceInterface, private val welcomeEmailService: WelcomeEmailService, private val emailVerificationService: EmailVerificationService, private val passwordResetService: PasswordResetService, private val tokenBlacklistService: TokenBlacklistService? = null, private val maxConcurrentSessions: Int = DEFAULT_MAX_CONCURRENT_SESSIONS )</ID>
    <ID>LongParameterList:AutoConfirmPolicy.kt$AutoConfirmPolicy$( tenantId: TenantId, documentId: DocumentId, source: DocumentSource, documentType: DocumentType, draftData: DocumentDraftData, auditPassed: Boolean, confidence: Double, linkedContactId: ContactId?, directionResolvedFromAiHintOnly: Boolean )</ID>
    <ID>LongParameterList:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$( private val tenantRepository: TenantRepository, private val documentRepository: DocumentRepository, private val invoiceRepository: InvoiceRepository, private val expenseRepository: ExpenseRepository, private val creditNoteRepository: CreditNoteRepository, private val cashflowEntriesRepository: CashflowEntriesRepository, private val reconciliationService: CashflowProjectionReconciliationService )</ID>
    <ID>LongParameterList:ChatRoutes.kt$( request: ChatRequest, tenantId: TenantId, userId: UserId, documentId: DocumentId?, chatAgent: ChatAgent, chatRepository: ChatRepository, models: ModelSet, logger: org.slf4j.Logger )</ID>
    <ID>LongParameterList:DocumentTruthService.kt$DocumentTruthService$( private val storageService: DocumentStorageService, private val documentRepository: DocumentRepository, private val ingestionRepository: DocumentIngestionRunRepository, private val draftRepository: DocumentDraftRepository, private val blobRepository: DocumentBlobRepository, private val sourceRepository: DocumentSourceRepository, private val matchReviewRepository: DocumentMatchReviewRepository )</ID>
    <ID>LongParameterList:DocumentTruthService.kt$DocumentTruthService$( tenantId: TenantId, filename: String, contentType: String, prefix: String, fileBytes: ByteArray, sourceChannel: DocumentSource )</ID>
    <ID>LongParameterList:DocumentTruthService.kt$DocumentTruthService$( tenantId: TenantId, sourceId: DocumentSourceId, sourceDocumentId: DocumentId, targetDocumentId: DocumentId, reason: DocumentMatchReviewReasonType, summary: String, aiConfidence: Double? = null, matchType: DocumentMatchType )</ID>
    <ID>LongParameterList:EmailService.kt$EmailService$( to: String, subject: String, htmlBody: String, textBody: String, fromAddress: String? = null, replyToAddress: String? = null )</ID>
    <ID>LongParameterList:ExpenseService.kt$ExpenseService$( tenantId: TenantId, category: ExpenseCategory? = null, fromDate: LocalDate? = null, toDate: LocalDate? = null, limit: Int = 50, offset: Int = 0 )</ID>
    <ID>LongParameterList:InvoiceService.kt$InvoiceService$( tenantId: TenantId, status: InvoiceStatus? = null, direction: DocumentDirection? = null, fromDate: LocalDate? = null, toDate: LocalDate? = null, limit: Int = 50, offset: Int = 0 )</ID>
    <ID>LongParameterList:NotificationService.kt$NotificationService$( tenantId: TenantId, userId: UserId, type: NotificationType? = null, category: NotificationCategory? = null, isRead: Boolean? = null, limit: Int = 20, offset: Int = 0 )</ID>
    <ID>LongParameterList:WelcomeEmailWorker.kt$WelcomeEmailWorker$( private val welcomeEmailJobRepository: WelcomeEmailJobRepository, private val userRepository: UserRepository, private val tenantRepository: TenantRepository, private val peppolSettingsRepository: PeppolSettingsRepository, private val emailService: EmailService, private val emailTemplateRenderer: EmailTemplateRenderer, private val emailConfig: EmailConfig )</ID>
    <ID>LoopWithTooManyJumpStatements:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$while</ID>
    <ID>LoopWithTooManyJumpStatements:TenantRoutes.kt$for</ID>
    <ID>MagicNumber:Application.kt$10000</ID>
    <ID>MagicNumber:Application.kt$5000</ID>
    <ID>MagicNumber:AuthService.kt$AuthService$8</ID>
    <ID>MagicNumber:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$100</ID>
    <ID>MagicNumber:ChatRoutes.kt$100</ID>
    <ID>MagicNumber:ContactMatchingService.kt$ContactMatchingService$0.8f</ID>
    <ID>MagicNumber:ContactMatchingService.kt$ContactMatchingService$0.9f</ID>
    <ID>MagicNumber:ContactRoutes.kt$200</ID>
    <ID>MagicNumber:DependencyInjection.kt$120_000</ID>
    <ID>MagicNumber:DocumentRecordRoutes.kt$100</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.02</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.08</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.1</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.15</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.2</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.45</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.55</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$0.99</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$100</ID>
    <ID>MagicNumber:DocumentTruthService.kt$DocumentTruthService$100.0</ID>
    <ID>MagicNumber:EmailVerificationService.kt$EmailVerificationService$3</ID>
    <ID>MagicNumber:EmailVerificationService.kt$EmailVerificationService$32</ID>
    <ID>MagicNumber:ExpenseRoutes.kt$200</ID>
    <ID>MagicNumber:InvoiceConfirmationService.kt$InvoiceConfirmationService$10000L</ID>
    <ID>MagicNumber:InvoiceRoutes.kt$200</ID>
    <ID>MagicNumber:InvoiceService.kt$InvoiceService$12</ID>
    <ID>MagicNumber:MultipartUpload.kt$1024.0</ID>
    <ID>MagicNumber:NotificationRoutes.kt$200</ID>
    <ID>MagicNumber:PasswordResetService.kt$PasswordResetService$10</ID>
    <ID>MagicNumber:PasswordResetService.kt$PasswordResetService$3</ID>
    <ID>MagicNumber:PasswordResetService.kt$PasswordResetService$32</ID>
    <ID>MagicNumber:PeppolRoutes.kt$200</ID>
    <ID>MagicNumber:ReceiptConfirmationService.kt$ReceiptConfirmationService$10000L</ID>
    <ID>MagicNumber:WelcomeEmailWorker.kt$WelcomeEmailWorker$100L</ID>
    <ID>MagicNumber:WelcomeEmailWorker.kt$WelcomeEmailWorker$3</ID>
    <ID>MagicNumber:WelcomeEmailWorker.kt$WelcomeEmailWorker$4</ID>
    <ID>MaxLineLength:CashflowEntriesService.kt$CashflowEntriesService$direction = if (direction == DocumentDirection.Inbound) CashflowDirection.Out else CashflowDirection.In</ID>
    <ID>MaxLineLength:CashflowOverviewService.kt$CashflowOverviewService$inboundInvoiceCount = cashOutEntries.count { it.sourceType == tech.dokus.domain.enums.CashflowSourceType.Invoice }</ID>
    <ID>MaxLineLength:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$"Cashflow projection startup sweep finished: scanned={}, repaired={}, failed={}, paidWithoutPaidAtDetected={}"</ID>
    <ID>MaxLineLength:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$"Detected paid invoice without paidAt during projection reconciliation: tenant={}, document={}, invoice={}"</ID>
    <ID>MaxLineLength:ContactResolutionService.kt$ContactResolutionService$if</ID>
    <ID>MaxLineLength:DocumentProcessingWorker.kt$DocumentProcessingWorker$directionResolvedFromAiHintOnly = result.directionResolution.source == DirectionResolutionSource.AiHint</ID>
    <ID>MaxLineLength:DocumentRecordRoutes.kt$"Detected paid invoice without paidAt during confirm-path reconciliation: tenant={}, document={}, invoice={}"</ID>
    <ID>MaxLineLength:EmailTemplateRenderer.kt$EmailTemplateRenderer$val guideAnchor = """&lt;a href="$GuideUrl" style="color:#111111; text-decoration:underline;"&gt;dokus.tech/guide&lt;/a&gt;"""</ID>
    <ID>MaxLineLength:NotificationService.kt$NotificationService$"Notification email sent but failed to persist emailSent=true for tenant {} user {} notification {}"</ID>
    <ID>MaxLineLength:NotificationService.kt$NotificationService$"Notification email sent but markEmailSent updated 0 rows for tenant {} user {} notification {}"</ID>
    <ID>MaxLineLength:PeppolPollingWorker.kt$PeppolPollingWorker$"Invalid PEPPOL PDF attachment base64 (attachmentId=${pdfAttachment.id}, filename=${pdfAttachment.filename})"</ID>
    <ID>MaxLineLength:PeppolPollingWorker.kt$PeppolPollingWorker$"Skipping PEPPOL received notifications for tenant {} because this poll was a full sync ({} documents)"</ID>
    <ID>MaxLineLength:PeppolPollingWorker.kt$PeppolPollingWorker$logger.warn("Failed to resolve Peppol sync mode for tenant {}. Defaulting to non-full-sync notifications.", tenantId, error)</ID>
    <ID>MaxLineLength:PeppolRoutes.kt$"Invoice #${invoice.invoiceNumber.value} to ${contact.name.value} could not be delivered via PEPPOL."</ID>
    <ID>MaxLineLength:PeppolRoutes.kt$"Invoice #${invoice.invoiceNumber.value} to ${contact.name.value} was delivered via PEPPOL."</ID>
    <ID>MaxLineLength:RedisRateLimitService.kt$RedisRateLimitService$message = "Too many login attempts. Please try again in ${lockoutDuration.inWholeMinutes} minutes."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Comparte un documento desde cualquier aplicación de tu teléfono o súbelo directamente — una factura, una cuenta o un recibo. Dokus lo lee y gestiona importes, IVA, contactos y fechas de vencimiento. Sin entrada manual. Cuando tiene certeza, todo se procesa. Cuando algo requiere tu criterio, te estará esperando."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Condividi un documento da qualsiasi app sul tuo telefono, oppure caricalo direttamente — una fattura, una nota, una ricevuta. Dokus lo legge e gestisce importi, IVA, contatti e scadenze. Nessun inserimento manuale. Quando è certo, tutto viene elaborato. Quando qualcosa richiede il tuo giudizio, resterà in attesa."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Cuando conectes PEPPOL, los documentos llegarán automáticamente desde la red. Una guía breve sobre cargas, integración móvil y configuración de PEPPOL está en $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Deel een document vanuit eender welke app op je telefoon, of upload het direct — een factuur, een rekening, een bonnetje. Dokus leest het en verwerkt bedragen, btw, contacten en vervaldata. Geen handmatige invoer. Wanneer het zeker is, wordt alles verwerkt. Wanneer iets jouw oordeel nodig heeft, wacht het op jou."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"For receipts, contracts, or anything outside PEPPOL — share it from any app on your phone or upload it directly. A short guide with practical tips is at $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Für Belege, Verträge oder alles außerhalb von PEPPOL — teilen Sie es aus jeder App auf Ihrem Telefon oder laden Sie es direkt hoch. Eine kurze Anleitung mit praktischen Tipps finden Sie unter $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Ich lese jede Antwort an diese Adresse. Wenn etwas falsch, fehlend oder unklar ist — sagen Sie es mir direkt."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Je lis chaque réponse à cette adresse. Si quelque chose est incorrect, manquant ou peu clair — dites-le-moi directement."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Leggo ogni risposta a questo indirizzo. Se qualcosa è sbagliato, manca o non è chiaro — dimmelo direttamente."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Lorsque vous connectez PEPPOL, les documents arriveront automatiquement depuis le réseau. Un guide court couvrant les imports, l'intégration mobile et la configuration PEPPOL est disponible sur $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL est connecté. Les factures et notes du réseau sont déjà traitées — montants, TVA, contacts, dates d'échéance. Aucune saisie manuelle. Quand Dokus est certain, tout est pris en charge. Quand quelque chose demande votre jugement, cela vous attend."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL está conectado. Las facturas y documentos de la red ya se están procesando — importes, IVA, contactos y fechas de vencimiento. Sin entrada manual. Cuando Dokus tiene certeza, todo queda gestionado. Cuando algo requiere tu criterio, te estará esperando."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL is connected. Invoices and bills from the network are already being processed — amounts, VAT, contacts, due dates. No manual entry. When Dokus is certain, everything is handled. When something needs your judgment, it will wait for you."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL is verbonden. Facturen en rekeningen van het netwerk worden al verwerkt — bedragen, btw, contacten, vervaldata. Geen handmatige invoer. Wanneer Dokus zeker is, wordt alles afgehandeld. Wanneer iets jouw oordeel nodig heeft, wacht het op jou."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL ist verbunden. Rechnungen und Belege aus dem Netzwerk werden bereits verarbeitet — Beträge, MwSt., Kontakte, Fälligkeitsdaten. Keine manuelle Eingabe. Wenn Dokus sicher ist, wird alles erledigt. Wenn etwas Ihr Urteil braucht, wartet es auf Sie."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"PEPPOL è connesso. Fatture e documenti dalla rete sono già in elaborazione — importi, IVA, contatti e scadenze. Nessun inserimento manuale. Quando Dokus è certo, gestisce tutto. Quando qualcosa richiede il tuo giudizio, resterà in attesa."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Para recibos, contratos o cualquier cosa fuera de PEPPOL — compártelo desde cualquier aplicación de tu teléfono o súbelo directamente. Una guía breve con consejos prácticos está en $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Partagez un document depuis n'importe quelle application sur votre téléphone, ou importez-le directement — une facture, une note, un reçu. Dokus le lit et traite montants, TVA, contacts et dates d'échéance. Aucune saisie manuelle. Quand il est certain, tout est traité. Quand quelque chose demande votre jugement, cela vous attend."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Per ricevute, contratti o qualsiasi cosa fuori da PEPPOL — condividila da qualsiasi app sul tuo telefono oppure caricala direttamente. Una guida breve con consigli pratici è disponibile su $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Pour les reçus, contrats, ou tout ce qui est hors PEPPOL — partagez-le depuis n'importe quelle application sur votre téléphone ou importez-le directement. Un guide court avec des conseils pratiques est disponible sur $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Quando colleghi PEPPOL, i documenti arriveranno automaticamente dalla rete. Una guida breve su caricamenti, integrazione mobile e configurazione PEPPOL è disponibile su $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Share a document from any app on your phone, or upload it directly — an invoice, a bill, a receipt. Dokus reads it and handles amounts, VAT, contacts, and due dates. No manual entry. When it is certain, everything is processed. When something needs your judgment, it will wait for you."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Teilen Sie ein Dokument aus jeder App auf Ihrem Telefon oder laden Sie es direkt hoch — eine Rechnung, einen Beleg, einen Kassenbon. Dokus liest es und verarbeitet Beträge, MwSt., Kontakte und Fälligkeitsdaten. Keine manuelle Eingabe. Wenn es sicher ist, wird alles verarbeitet. Wenn etwas Ihr Urteil braucht, wartet es auf Sie."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Voor bonnetjes, contracten of alles buiten PEPPOL — deel het vanuit eender welke app op je telefoon of upload het direct. Een korte gids met praktische tips staat op $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Wanneer je PEPPOL verbindt, komen documenten automatisch binnen vanuit het netwerk. Een korte gids over uploads, telefoonintegratie en PEPPOL-setup staat op $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"Wenn Sie PEPPOL verbinden, kommen Dokumente automatisch aus dem Netzwerk. Eine kurze Anleitung zu Uploads, Telefonintegration und PEPPOL-Einrichtung finden Sie unter $GuideUrlPlaceholder."</ID>
    <ID>MaxLineLength:WelcomeEmailLocalization.kt$"When you connect PEPPOL, documents will arrive from the network automatically. A short guide covering uploads, phone integration, and PEPPOL setup is at $GuideUrlPlaceholder."</ID>
    <ID>MaximumLineLength:CashflowEntriesService.kt$CashflowEntriesService$ </ID>
    <ID>MaximumLineLength:CashflowOverviewService.kt$CashflowOverviewService$ </ID>
    <ID>MaximumLineLength:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$ </ID>
    <ID>MaximumLineLength:ContactResolutionService.kt$ContactResolutionService$ </ID>
    <ID>MaximumLineLength:DocumentProcessingWorker.kt$DocumentProcessingWorker$ </ID>
    <ID>MaximumLineLength:DocumentRecordRoutes.kt$ </ID>
    <ID>MaximumLineLength:EmailTemplateRenderer.kt$EmailTemplateRenderer$ </ID>
    <ID>MaximumLineLength:NotificationService.kt$NotificationService$ </ID>
    <ID>MaximumLineLength:PeppolPollingWorker.kt$PeppolPollingWorker$ </ID>
    <ID>MaximumLineLength:PeppolRoutes.kt$ </ID>
    <ID>MaximumLineLength:RedisRateLimitService.kt$RedisRateLimitService$ </ID>
    <ID>MaximumLineLength:WelcomeEmailLocalization.kt$ </ID>
    <ID>NestedBlockDepth:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$suspend fun runSweepOnce(): CashflowProjectionReconciliationReport</ID>
    <ID>NestedBlockDepth:ContactResolutionService.kt$ContactResolutionService$suspend fun resolve( tenantId: TenantId, draftData: DocumentDraftData, authoritativeSnapshot: CounterpartySnapshot, tenantVat: VatNumber? = null ): ContactResolutionResult</ID>
    <ID>NestedBlockDepth:DocumentProcessingWorker.kt$DocumentProcessingWorker$private suspend fun processIngestionRun(ingestion: IngestionItemEntity)</ID>
    <ID>NoBlankLineBeforeRbrace:AutoConfirmPolicy.kt$AutoConfirmPolicy$ </ID>
    <ID>NoBlankLineBeforeRbrace:DocumentTruthService.kt$DocumentTruthService$ </ID>
    <ID>NoUnusedImports:CashflowProjectionReconciliationService.kt$tech.dokus.backend.services.cashflow.CashflowProjectionReconciliationService.kt</ID>
    <ID>NoUnusedImports:CreditNoteService.kt$tech.dokus.backend.services.cashflow.CreditNoteService.kt</ID>
    <ID>NoUnusedImports:DocumentRecordRoutes.kt$tech.dokus.backend.routes.cashflow.DocumentRecordRoutes.kt</ID>
    <ID>NoUnusedImports:DocumentTruthService.kt$tech.dokus.backend.services.documents.DocumentTruthService.kt</ID>
    <ID>NoUnusedImports:InvoiceConfirmationService.kt$tech.dokus.backend.services.documents.confirmation.InvoiceConfirmationService.kt</ID>
    <ID>NoUnusedImports:InvoiceService.kt$tech.dokus.backend.services.cashflow.InvoiceService.kt</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.client.*</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.client.engine.cio.*</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.client.plugins.contentnegotiation.*</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.client.plugins.logging.*</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.serialization.kotlinx.json.*</ID>
    <ID>NoWildcardImports:DependencyInjection.kt$import io.ktor.server.application.*</ID>
    <ID>NoWildcardImports:DocumentRecordRoutes.kt$import io.ktor.http.*</ID>
    <ID>NoWildcardImports:DocumentRecordRoutes.kt$import io.ktor.server.request.*</ID>
    <ID>NoWildcardImports:DocumentRecordRoutes.kt$import io.ktor.server.resources.*</ID>
    <ID>NoWildcardImports:DocumentRecordRoutes.kt$import io.ktor.server.response.*</ID>
    <ID>NoWildcardImports:TenantRoutes.kt$import io.ktor.http.*</ID>
    <ID>NoWildcardImports:TenantRoutes.kt$import io.ktor.server.request.*</ID>
    <ID>NoWildcardImports:TenantRoutes.kt$import io.ktor.server.resources.*</ID>
    <ID>NoWildcardImports:TenantRoutes.kt$import io.ktor.server.response.*</ID>
    <ID>ReturnCount:AutoConfirmPolicy.kt$AutoConfirmPolicy$suspend fun canAutoConfirm( tenantId: TenantId, documentId: DocumentId, source: DocumentSource, documentType: DocumentType, draftData: DocumentDraftData, auditPassed: Boolean, confidence: Double, linkedContactId: ContactId?, directionResolvedFromAiHintOnly: Boolean ): Boolean</ID>
    <ID>ReturnCount:ContactResolutionService.kt$ContactResolutionService$private suspend fun maybeHealPaymentAliasContact( tenantId: TenantId, matchedContact: ContactDto, authoritativeName: String? ): ContactDto</ID>
    <ID>ReturnCount:ContactResolutionService.kt$ContactResolutionService$suspend fun resolve( tenantId: TenantId, draftData: DocumentDraftData, authoritativeSnapshot: CounterpartySnapshot, tenantVat: VatNumber? = null ): ContactResolutionResult</ID>
    <ID>ReturnCount:DocumentTruthService.kt$DocumentTruthService$private fun computeIdentity(tenantId: TenantId, data: DocumentDraftData): IdentityDescriptor?</ID>
    <ID>ReturnCount:DocumentTruthService.kt$DocumentTruthService$suspend fun applyPostExtractionMatching( tenantId: TenantId, documentId: DocumentId, sourceId: DocumentSourceId?, draftData: DocumentDraftData, extractedSnapshotJson: String ): DocumentIntakeServiceResult</ID>
    <ID>ReturnCount:DocumentTruthService.kt$DocumentTruthService$suspend fun deleteSource( tenantId: TenantId, documentId: DocumentId, sourceId: DocumentSourceId, confirmLastOnConfirmed: Boolean ): SourceDeleteResult</ID>
    <ID>ReturnCount:PasswordResetService.kt$PasswordResetService$suspend fun resetPassword(token: String, newPassword: String): Result&lt;Unit&gt;</ID>
    <ID>ReturnCount:RedisRateLimitService.kt$RedisRateLimitService$override suspend fun checkLoginAttempts(email: String): Result&lt;Unit&gt;</ID>
    <ID>SpreadOperator:RedisRateLimitService.kt$RedisRateLimitService$(*attemptKeys.toTypedArray())</ID>
    <ID>SwallowedException:AttachmentRoutes.kt$e: Exception</ID>
    <ID>SwallowedException:AvatarRoutes.kt$e: IllegalArgumentException</ID>
    <ID>SwallowedException:ChatRoutes.kt$e: Exception</ID>
    <ID>SwallowedException:DocumentPageRoutes.kt$e: Exception</ID>
    <ID>SwallowedException:DocumentPageRoutes.kt$e: IllegalArgumentException</ID>
    <ID>SwallowedException:DocumentRecordRoutes.kt$e: Exception</ID>
    <ID>SwallowedException:DocumentRecordRoutes.kt$e: NoSuchElementException</ID>
    <ID>ThrowsCount:AttachmentRoutes.kt$internal fun Route.attachmentRoutes()</ID>
    <ID>ThrowsCount:AvatarRoutes.kt$internal fun Route.avatarRoutes()</ID>
    <ID>ThrowsCount:ChatRoutes.kt$internal fun Route.chatRoutes()</ID>
    <ID>ThrowsCount:ContactRoutes.kt$fun Route.contactRoutes()</ID>
    <ID>ThrowsCount:DocumentPageRoutes.kt$internal fun Route.documentPageRoutes()</ID>
    <ID>ThrowsCount:DocumentRecordRoutes.kt$internal fun Route.documentRecordRoutes()</ID>
    <ID>ThrowsCount:ExpenseRoutes.kt$internal fun Route.expenseRoutes()</ID>
    <ID>ThrowsCount:InvoiceRoutes.kt$internal fun Route.invoiceRoutes()</ID>
    <ID>ThrowsCount:PeppolPollingWorker.kt$internal fun decodePeppolAttachmentBase64(encoded: String): ByteArray</ID>
    <ID>ThrowsCount:PeppolRoutes.kt$internal fun Route.peppolRoutes()</ID>
    <ID>ThrowsCount:TenantRoutes.kt$internal fun Route.tenantRoutes()</ID>
    <ID>TooGenericExceptionCaught:AttachmentRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:AuthService.kt$AuthService$e: Exception</ID>
    <ID>TooGenericExceptionCaught:AvatarRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:CashflowEntriesService.kt$CashflowEntriesService$t: Throwable</ID>
    <ID>TooGenericExceptionCaught:CashflowProjectionReconciliationWorker.kt$CashflowProjectionReconciliationWorker$throwable: Throwable</ID>
    <ID>TooGenericExceptionCaught:ChatRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:DocumentPageRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:DocumentProcessingWorker.kt$DocumentProcessingWorker$e: Exception</ID>
    <ID>TooGenericExceptionCaught:DocumentProcessingWorker.kt$DocumentProcessingWorker$markError: Exception</ID>
    <ID>TooGenericExceptionCaught:DocumentRecordRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:EmailVerificationService.kt$EmailVerificationService$e: Exception</ID>
    <ID>TooGenericExceptionCaught:PasswordResetService.kt$PasswordResetService$e: Exception</ID>
    <ID>TooGenericExceptionCaught:PdfPreviewService.kt$PdfPreviewService$e: Exception</ID>
    <ID>TooGenericExceptionCaught:RateLimitCleanupWorker.kt$RateLimitCleanupWorker$e: Exception</ID>
    <ID>TooGenericExceptionCaught:RedisRateLimitService.kt$RedisRateLimitService$e: Exception</ID>
    <ID>TooGenericExceptionCaught:TenantRoutes.kt$e: Exception</ID>
    <ID>TooGenericExceptionCaught:WelcomeEmailWorker.kt$WelcomeEmailWorker$e: Exception</ID>
    <ID>TooManyFunctions:AuthService.kt$AuthService</ID>
    <ID>TooManyFunctions:DocumentTruthService.kt$DocumentTruthService</ID>
    <ID>UnusedParameter:AutoConfirmPolicy.kt$AutoConfirmPolicy$documentId: DocumentId</ID>
    <ID>UnusedParameter:AutoConfirmPolicy.kt$AutoConfirmPolicy$tenantId: TenantId</ID>
    <ID>UnusedParameter:PdfPreviewService.kt$PdfPreviewService$tenantId: TenantId</ID>
    <ID>UnusedParameter:PeppolPollingWorker.kt$PeppolPollingWorker$senderPeppolId: String</ID>
    <ID>UnusedParameter:TeamService.kt$TeamService$requestingUserId: UserId</ID>
    <ID>UnusedPrivateClass:ExpenseRoutes.kt$CategorizeExpenseRequest</ID>
    <ID>UnusedPrivateClass:ExpenseRoutes.kt$CategorizeExpenseResponse</ID>
    <ID>UnusedPrivateClass:InvoiceRoutes.kt$CalculateTotalsRequest</ID>
    <ID>UnusedPrivateProperty:PdfPreviewService.kt$PdfPreviewService.Companion$private const val DEFAULT_DPI = 150</ID>
    <ID>UnusedPrivateProperty:PdfPreviewService.kt$PdfPreviewService.Companion$private const val DEFAULT_MAX_PAGES = 10</ID>
    <ID>UnusedPrivateProperty:PeppolPollingWorker.kt$PeppolPollingWorker$private val documentRepository: DocumentRepository</ID>
    <ID>UnusedPrivateProperty:RedisRateLimitService.kt$RedisRateLimitService$val windowStart = currentTime - attemptWindow.inWholeMilliseconds</ID>
    <ID>UnusedPrivateProperty:TeamService.kt$TeamService$private val tenantRepository: TenantRepository</ID>
    <ID>UseCheckOrError:TeamService.kt$TeamService$throw IllegalStateException("Failed to retrieve created invitation")</ID>
    <ID>UseRequire:PeppolPollingWorker.kt$throw IllegalArgumentException("Attachment payload is empty")</ID>
    <ID>UseRequire:PeppolPollingWorker.kt$throw IllegalArgumentException("Invalid PEPPOL attachment base64 payload")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Cannot change role to Owner. Use transfer ownership instead.")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Cannot change the Owner's role. Transfer ownership first.")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Cannot invite users as Owner. Use transfer ownership instead.")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Cannot remove the workspace Owner")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Cannot remove yourself from the workspace")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Only the Owner can transfer ownership")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("Target user's membership is not active")</ID>
    <ID>UseRequire:TeamService.kt$TeamService$throw IllegalArgumentException("User is already a member of this workspace")</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.client.*</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.client.engine.cio.*</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.client.plugins.contentnegotiation.*</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.client.plugins.logging.*</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.serialization.kotlinx.json.*</ID>
    <ID>WildcardImport:DependencyInjection.kt$import io.ktor.server.application.*</ID>
    <ID>WildcardImport:DocumentRecordRoutes.kt$import io.ktor.http.*</ID>
    <ID>WildcardImport:DocumentRecordRoutes.kt$import io.ktor.server.request.*</ID>
    <ID>WildcardImport:DocumentRecordRoutes.kt$import io.ktor.server.resources.*</ID>
    <ID>WildcardImport:DocumentRecordRoutes.kt$import io.ktor.server.response.*</ID>
    <ID>WildcardImport:TenantRoutes.kt$import io.ktor.http.*</ID>
    <ID>WildcardImport:TenantRoutes.kt$import io.ktor.server.request.*</ID>
    <ID>WildcardImport:TenantRoutes.kt$import io.ktor.server.resources.*</ID>
    <ID>WildcardImport:TenantRoutes.kt$import io.ktor.server.response.*</ID>
  </CurrentIssues>
</SmellBaseline>
